; PlatformIO Project Configuration File
;
;   Build options: build flags, source filter
;   Upload options: custom upload port, speed and extra flags
;   Library options: dependencies, extra library storages
;   Advanced options: extra scripting
;
; Please visit documentation for the other options and examples
; https://docs.platformio.org/page/projectconf.html

[platformio]
src_dir = LoRaWANRastreio
test_dir = test
default_envs = heltec_wireless_tracker
# default_envs = native

# A placa mesmo é Heltec Wireless Tracker v1.2, mas no PlatformIO essa é a mais próxima
# Mesmo processador (ESP32-S3) e possui LoRa.
# ===================================================================================
# ATENÇÃO: Não enviar o código para a placa usando PlatformIO. Utilize o Arduino IDE.
# Instruções: https://docs.heltec.org/en/node/esp32/wireless_tracker/index.html
# ===================================================================================
[env:heltec_wireless_tracker]
#platform = espressif32
platform = https://github.com/BrentonPoke/platform-espressif32.git#wireless-tracker	
framework = arduino
# https://github.com/platformio/platform-espressif32/issues/1225#issuecomment-2232439255
#platform_packages = 
#	platformio/framework-arduinoespressif32 @ https://github.com/espressif/arduino-esp32/releases/download/3.3.2/esp32-3.3.2.zip
# 	framework-arduinoespressif32 @ https://github.com/Heltec-Aaron-Lee/WiFi_Kit_series
#	framework-arduinoespressif32-libs @ https://github.com/espressif/arduino-esp32/releases/download/3.3.2/esp32-3.3.2-libs.zip
board = heltec_wireless_tracker
# board_build.variants_dir = ~/.arduino15/packages/Heltec-esp32/hardware/esp32/3.0.2/variants
board_build.variants_dir = custom_variants

# https://github.com/ropg/heltec_esp32_lora_v3/issues/24#issuecomment-2212470195
monitor_speed = 115200
monitor_filters =
	default
	esp32_exception_decoder


# https://github.com/Heltec-Aaron-Lee/WiFi_Kit_series/releases/download/3.0.3/heltec-esp32-arduino-3.0.3.zip
#lib_extra_dirs = 
#	~/Arduino/libraries
#	~/.arduino15/packages/Heltec-esp32/hardware/esp32/3.0.2/libraries/
lib_deps =
 	adafruit/Adafruit GFX Library 
	/home/erick/Arduino/libraries/Heltec_ESP32_Dev-Boards
	# https://github.com/HelTecAutomation/Heltec_ESP32.git
	# mikalhart/TinyGPSPlus@^1.1.0
	# heltecautomation/Heltec ESP32 Dev-Boards@^2.1.4

build_flags = 
	-D ACTIVE_REGION=LORAMAC_REGION_AU915
	-D HELTEC_BOARD=34
	-D SLOW_CLK_TPYE=0
	-D LoRaWAN_DEBUG_LEVEL=0
	-D RADIO_NSS=8
#	-lheltec_s3

# https://github.com/platformio/platformio-examples/tree/develop/unit-testing/arduino-mock
[env:native]
platform = native
# framework = arduino

lib_compat_mode = off

lib_deps = 
	Unity
	fabiobatsilva/ArduinoFake
	mikalhart/TinyGPSPlus@^1.1.0

build_flags = 
	-std=gnu++11
	-D ARDUINO=1
